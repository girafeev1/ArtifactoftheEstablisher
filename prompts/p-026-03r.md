# P-026-03r — Finish Payment UX and Add Payment cascade (final touches)

## Save path
prompts/p-026-03r.md

## Branch & PR
- Branch: codex/finalize-payment-ux-and-functionality-enhancements-03r
- PR title: feat(payment): finish sticky Back, single remaining blink, stable assignment, Add Payment cascade, list truncation (P-026-03r)
- Labels: payments, ui, codex

## Rules
- Do NOT modify CI or GitHub Actions.

## A) Sticky footer + Back
- Place Back inside sticky footer/action bar; body is scroll container; add bottom padding.

## B) Remaining blink — single render
- Payment Amount never blinks; Remaining renders once with blink class.

## C) Assignment list
- Persisted shell with zero-state; selection updates Remaining; writes persist.

## D) Add Payment cascade
- Method: FPS, Bank Transfer, Cheque → `method`.
- Entity: Music Establish (ERL), Personal → `entity`.
- If ERL: Bank (label `{bankName} {bankCode}`; fallback `{docId} {collectionId}`;), Bank Account (label `accountType`).
- On Submit: `identifier = "{bankCode}/{accountDocId}"`, plus `timestamp` & `editedBy`; recompute identifier if regex fails.

## E) List “For Session(s)”
- Show ≤5 ordinals, then trailing “…”; headers ellipsize; cells resizable.

## Tests
- Unit: identifier + truncation helpers.  
- Cypress: remaining blink, assignment, cascade write, list truncation.

## Acceptance
- All items A–E visible in UI; no TS errors.
