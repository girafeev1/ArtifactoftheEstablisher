# P-026 — Finish Payment UX and Add Payment cascade

## Save path
prompts/p-026.md

## Branch & PR
- Branch: codex/finish-payment-ux-and-add-payment-cascade-p026
- PR title: feat(payment): finalize sticky Back, single Remaining blink, stable assignment, Add Payment cascade, list “For Session(s)” truncation (P-026)
- Labels: payments, ui, codex

## Goals
A) Sticky Back inside sticky footer  
B) Remaining blink = single element  
C) Assignment section always visible & functional  
D) Add Payment cascade (Entity → Bank → Bank Account) + writes  
E) Payment History list: “For Session(s)” ≤5 then “…”  
F) Header width decouple (headers ellipsize)

## Implement
- **Add Payment**:
  - Method dropdown: FPS, Bank Transfer, Cheque → `method`.
  - Entity dropdown: Music Establish (ERL), Personal → `entity`.
  - If ERL: Bank dropdown from ERL directory (label `{bankName} {bankCode}`; fallback `{docId} {collectionId}`), Bank Account dropdown (label `accountType`).
  - On Submit: `identifier = "{bankCode}/{accountDocId}"`, plus stamp `timestamp` & `editedBy`.
  - If user entered identifier doesn’t match regex, recompute.
- **Detail & List** per goals above.

## Tests
- Unit: helpers for identifier + session truncation.
- E2E: single Remaining blink; assignment flow; cascade writes; list “For Session(s)” truncation.

## Acceptance
- All goals A–F met; no new TS errors.
