# PR #229 ‚Äî Diff Summary

- **Base (target)**: `d86791bc6d62d71052060eb3c75a33520a7f5722`
- **Head (source)**: `e2f6f9e86a9e70fb1453573a154d88076c4aa8be`
- **Repo**: `girafeev1/ArtifactoftheEstablisher`

## Changed Files

```txt
M	docs/Task Log.md
```

## Stats

```txt
 docs/Task Log.md | 51 +++++++++++++++++----------------------------------
 1 file changed, 17 insertions(+), 34 deletions(-)
```

## Unified Diff (truncated to first 4000 lines)

```diff
diff --git a/docs/Task Log.md b/docs/Task Log.md
index f95f4e7..f86bb2c 100644
--- a/docs/Task Log.md	
+++ b/docs/Task Log.md	
@@ -4,37 +4,13 @@
 > Convention: ‚úÖ done, ‚è≥ in progress, üß≠ next / planned.
 
 Latest change summary
-- Payment History (list): added ‚ÄúFor Session(s)‚Äù column (‚â§5 ordinals + ‚Ä¶) and header ellipsis polish.
-- Payment Detail: assignment area made persistent; id‚Üíordinal map added.
-- Add Payment: when ERL is selected and codes are available, submit stamps `identifier = bankCode/accountDocId` and persists the codes.
-- Sticky footer/Back, single Remaining blink, and full cascade UI remain in progress.
-- Bank dropdown labels fall back to doc identifiers when name or code is missing.
-- Logged P-026-03r final payment UX prompt.
-- Session assignment table persists with zero-state and updates Remaining on selection.
-- Payment History lists ‚ÄúFor Session(s)‚Äù with up to five ordinals then ellipsis.
-- Table headers ellipsize independently of resizable cell widths.
-- Payment Detail: restored session assignment list & flow.
-- Payment Detail: inline editing for Method/Entity/Identifier/Reference # when empty; read-only after set.
-- Base Rate History: inline effective date when empty; read-only after set.
-- Payment History: headers finalized (Method, Entity, Bank Account, Reference #).
-- Payment Detail: 'For Session(s)' truncates to 5 with expand.
-- Identifier normalization on write; safe display with em dash.
-- Unit + e2e tests added.
-- Queued P-023: Payments metadata (method/entity/bank), header ellipsis, ‚ÄúFor Session(s)‚Äù truncation, sticky footer, and ERL directory integration.
-- Enforced append-only Task Log with CI guard.
-- Add continuous Context Bundle for branch pushes (Issue per branch).
-- Reverted Total Sessions to include cancelled/proceeded like before.
-- Added double-click to auto-size columns to widest visible content; persisted per-user.
-- Unified Balance Due source-of-truth: compute via useBilling, write to billingSummary.balanceDue, card view uses computed value with skeleton fallback.
-- Hardened dialog stacking/portals: "Add Payment" and similar modals always topmost.
-- Added Base Rate History (info icon) with rate, timestamp, editedBy and add-entry flow.
-- Added PR Context Bundle automation, PaymentModal summary write, overlay test, and README Task Log link fix.
-- Replaced dayjs timezone dependency with built-in plugin to fix install failures.
-- Queue P-021: loading UX cleanup, due parity, vouchers default, payment blink, base-rate history editing, min-width v3, calendar scan fixes.
-- Queued P-022 to complete P-021 acceptance (payment blink hookup, base-rate info relocation), add scan status/logs, and tidy labels.
-- PaymentDetail: wrapped Remaining in a single element and added zero-state for assignment (foundation for single-blink and persistent shell). [PR #225]
-- ERL directory helpers added/rewritten with tests; identifier normalization improved (recompute from bankCode/accountDocId). [PR #225]
-- Small CSS tweak toward sticky footer. [PR #225]
+- Badge now renders top-right in the app, confirming deploys reach prod (shows the active P-prompt id).
+- PaymentDetail groundwork present: single Remaining wrapper + assignment zero-state; final single-blink hookup still pending.
+- ERL directory helpers + identifier normalization improved; Entity/Bank/Account dropdowns not visible yet in Add Payment dialog or in Payment Detail editing-on-empty.
+- ‚ÄúBack‚Äù control not yet placed inside sticky footer across StudentDialog.
+- 3-dots settings button still mispositioned; must be bottom-left inside the white card, aligned with the card‚Äôs footer row (not in sidebar).
+- Sessions tab sorting not implemented yet.
+- Deploy noise reduced; investigating occasional builds after ‚Äúarchive PR ###‚Äù context commits.
 
 Tasks T-xxx
 ### T-080
@@ -112,6 +88,12 @@ Tasks table ‚Äî add/update:
 
 | ID    | Title                                                | State | Notes / Files |
 |-------|------------------------------------------------------|-------|---------------|
+| T-300 | 3-dots settings button: sticky bottom-left inside white card | ‚è≥    | Position within card footer row; not sidebar |
+| T-301 | Sticky Back inside StudentDialog sticky footer | ‚è≥    | Footer anchors Back; body is scroll container |
+| T-302 | Remaining blink = single element; Amount never blinks | ‚è≥    | Remove duplicate render; a11y reduced-motion |
+| T-303 | Payment Detail editing-on-empty (Entity/Bank/Account/Ref) | ‚è≥    | Save writes + identifier compute + audit |
+| T-304 | Add Payment cascade UI (Entity‚ÜíBank‚ÜíAccount) in dialog | ‚è≥    | Visible selects + dependent options |
+| T-305 | Sessions tab: sorting + persist + aria-sort | üß≠    | Default unchanged; per-user preference |
 | T-072 | Header ellipsis & width decouple (header no longer blocks narrow columns)                     | ‚úÖ    | Table headers CSS + autosize guard |
 | T-073 | Payment History ‚ÄúFor Session(s)‚Äù max 5 then ‚Äú‚Ä¶‚Äù                                                | ‚úÖ    | PaymentHistory formatter; detail-only; list pending |
 | T-074 | Sticky dialog footer (window bottom, not scroller)                                            | ‚è≥    | Back lives in scroller; move into footer in P-026. |
@@ -194,7 +176,7 @@ Tasks table ‚Äî add/update:
 | T-024 | Make scrollbar-in-footer consistent across all tables | üß™    | Quick sweep |
 | T-080 | StudentDialog Back button inside sticky footer                | ‚è≥    | Move Back into footer bar; ensure body has bottom padding; UI not visible yet |
 | T-081 | Payment Detail blink logic: only Remaining blinks             | ‚è≥    | Remove duplicate span; Payment Amount static; UI not visible yet |
-| T-082 | Payment Detail: session assignment visible & robust           | ‚è≥    | Zero-state; selection updates Remaining; persist; UI not visible yet |
+| T-082 | Payment History ‚ÄúFor Session(s)‚Äù ‚â§5 + ‚Äú‚Ä¶‚Äù (list) | ‚úÖ    | Shipped earlier; keep green |
 | T-083 | Add Payment dialog cascade (Method/Entity/Bank/Account/Ref)   | ‚è≥    | ERL banks‚Üíaccounts; identifier build; audit fields; UI not visible yet |
 | T-084 | Payment History: For Session(s) shows ‚â§5 then ‚Ä¶ (list view)   | ‚úÖ    | Detail already truncates; list column to match |
 | T-085 | Column header width decouple (narrow even when header long)   | ‚è≥    | th ellipsis; table-layout fixed; cell widths OK |
@@ -205,8 +187,9 @@ Prompts table ‚Äî update:
 
 | ID    | Title                                                | State | Notes |
 |-------|------------------------------------------------------|-------|-------|
-| P-027-03r | Finish Add Payment cascade UI; sticky Back; single Remaining blink; stable assignment; badge; 3-dots placement. | üß≠    | See prompts/p-027-03r.md |
-| P-027-02r | Ship the actual Add Payment cascade UI + sticky Back + single Remaining blink + stable assignment | ‚è≥    | See prompts/p-027-02r.md |
+| P-027-04r | Finish cascade UI (detail), sticky Back, 3-dots placement, single Remaining blink, sessions sorting, badge in card view. | üß≠    | See prompts/p-027-04r.md |
+| P-027-03r | Finish Add Payment cascade UI; sticky Back; single Remaining blink; stable assignment; badge; 3-dots placement. | ‚úÖ    | See prompts/p-027-03r.md |
+| P-027-02r | Ship the actual Add Payment cascade UI + sticky Back + single Remaining blink + stable assignment | ‚úÖ    | See prompts/p-027-02r.md |
 | P-026 | Finish Payment UX and Add Payment cascade | ‚è≥    | See prompts/p-026.md (revisions: p-026-01r, p-026-02r, p-026-03r) |
 | P-025 | Fix Payment Detail/History UX, restore assignment, inline editing | ‚è≥    | See prompts/p-025.md |
 | P-024 | Payment UI polish & data rules | ‚úÖ    | See prompts/p-024.md |
```
